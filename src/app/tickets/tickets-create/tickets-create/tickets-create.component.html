<div class="main-content">
    <div class="container-fluid">
        <div [ngClass]="{'col-md-12': !ticket.id, 'col-md-6': ticket.id}" *ngIf="!loading">
            <form #form="ngForm">
                <div class="card">
                    <div class="card-header card-header-primary">
                        <h4 class="card-title">
                            Ticket
                        </h4>
                        <p class="card-category" *ngIf="ticket.id">Editar Ticket {{ticket.code}}</p>
                        <p class="card-category" *ngIf="!ticket.id">Criar novo Ticket</p>
                    </div>
                    <div class="card-body">
                        <div class="row" *ngIf="ticket.id">
                            <div class="col-md-3">
                                <b>Estado:</b><span>{{ticket.state}}</span>
                            </div>
                            <div class="col-md-9">
                                <b>Colaborador:</b><span>{{ticket.collaboratorName}}</span>
                            </div>
                            <mat-divider></mat-divider>
                            <div class="col-md-6" style="margin-top: 5px;">
                                <b>Assunto:</b><span>{{ticket.subject}}</span>
                            </div>
                            <div class="col-md-12" style="margin-top: 5px;">
                                <b>Descrição:</b><span>{{ticket.description}}</span>
                            </div>
                        </div>
                        <div class="row" *ngIf="!ticket.id">
                            <div class="col-md-6">
                                <mat-form-field class="example-full-width">
                                    <input matInput #subject="ngModel" name="subject" [(ngModel)]="ticket.subject"
                                        type="text" placeholder="Assunto" required [disabled]="ticket.id">
                                    <mat-error *ngIf="subject.touched && subject.invalid">
                                        Campo inválido
                                    </mat-error>
                                </mat-form-field>
                            </div>
                            <div class="col-md-12">
                                <mat-form-field class="example-full-width">
                                    <textarea matInput #description="ngModel" name="description"
                                        [(ngModel)]="ticket.description" type="text" placeholder="Descrição"
                                        [disabled]="ticket.id"></textarea>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer" style="display: block;">
                        <button mat-raised-button class="btn btn-primary btn-sm mat-raised-button pointer pull-right"
                            [disabled]="!form.valid" (click)="submit()" *ngIf="!ticket.id">
                            <i class="material-icons">save</i>
                            Gravar
                        </button>
                        <button mat-raised-button class="btn btn-default btn-sm mat-raised-button pointer pull-right"
                            routerLinkActive="active" [routerLink]="['/controlled-zone/list']" *ngIf="!ticket.id">
                            <i class="material-icons">cancel</i>
                            Cancelar
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>